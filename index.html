<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <title>Customer Panel ‚Äî Bernie's Reward</title> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> <style> @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap'); body { font-family: "Poppins", sans-serif; background: #f2f6f9; margin: 0; padding: 0; display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; } .container { background: #ffffff; width: 92%; max-width: 480px; border-radius: 18px; padding: 24px; margin-top: 36px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); position: relative; } h2,h3,h4,h6 { text-align:center; color: green; margin:8px 0; } input { width:100%; padding:12px; margin:6px 0; border:1px solid #e6e6e6; border-radius:10px; font-size:15px; box-sizing:border-box; transition: 0.2s; } input:focus { border-color: green; outline:none; } #card { text-transform:uppercase; } button { width:100%; background:green; color:white; border:none; padding:12px; border-radius:10px; margin-top:10px; font-weight:700; font-size:15px; cursor:pointer; transition:0.18s; } button:hover { background:#0f2027; } /* ATM Card */ .atm-card { width:100%; height:200px; border-radius:14px; background-image: url("https://i.pinimg.com/736x/13/55/61/1355615df1af6f38065eb0bc6ee899bb.jpg"); background-size: cover; background-position: center; background-repeat: no-repeat; color:#fff; padding:16px; box-sizing:border-box; margin-bottom:14px; display:flex; flex-direction:column; justify-content:space-between; position:relative; box-shadow:0 8px 30px rgba(18,58,107,0.25); } .card-top { display:flex; justify-content:space-between; align-items:center; } .bank { font-weight:700; font-size:14px; opacity:0.95; } .card-number-wrapper { position:relative; margin-top:16px; display:flex; justify-content:space-between; align-items:center; } .card-number { font-size:25px; font-weight:900; letter-spacing:4px; background: linear-gradient(360deg, white, #ffd700); -webkit-background-clip: text; background-clip: text; color: transparent; text-shadow: 2px 2px 0 rgba(0,0,0,0.25), 4px 4px 8px rgba(0,0,0,0.3); flex:1; transition: all 0.2s ease; } .eye-icon { font-size:18px; cursor:pointer; user-select:none; margin-left:20px; } .points-box { color: #FFD700; font-weight: 700; font-size: 25px; text-align: center; text-shadow: 2px 2px 0 #b8860b, 4px 4px 8px rgba(0,0,0,0.4); transform: perspective(500px) rotateX(3deg) rotateY(-2deg); } .points-label { font-size: 15px; margin-right: 8px; color:white; } .card-bottom { display:flex; justify-content:space-between; align-items:center; margin-top:8px; } .holder { font-size:15px; text-transform:uppercase; opacity:1; } .logout-btn { width:auto; background:green; color:white; border:1px solid #ffd7bf; padding:8px 12px; border-radius:12px; cursor:pointer; font-weight:500; margin-bottom:12px; float:right; } .logout-btn:hover { background:#ffd7bf; } /* Modals */ #codeModal, #termsModal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.4); justify-content:center; align-items:center; z-index:1000; } #codeModalContent, #termsBox { background:#fff; padding:24px; border-radius:12px; text-align:center; width:90%; max-width:380px; box-shadow:0 8px 25px rgba(0,0,0,0.3); } #codeModalContent h4, #termsBox h3 { margin-bottom:8px; } #codeModalContent h1 { margin-bottom:12px; color:#1b5e20; font-size:28px; } #codeModalContent button, #termsBox button { width:auto; margin-top:16px; padding:10px; background:green; color:white; border:none; border-radius:10px; font-weight:bold; cursor:pointer; } #codeModalContent button:hover, #termsBox button:hover { background:#0f2027; } #info { display:none; margin-top:12px; } .login-reminder { font-size:13px; color:#b2451e; margin-top:8px; line-height:1.3; } .footer { text-align:center; font-size:13px; color:#777; margin-top:12px; } /* Spinner */ #spinner { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.3); justify-content:center; align-items:center; z-index:1000; } #spinner div { border:6px solid #f3f3f3; border-top:6px solid green; border-radius:50%; width:40px; height:40px; animation:spin 1s linear infinite; } @keyframes spin { 0% { transform:rotate(0deg); } 100% { transform:rotate(360deg); } } /* HISTORY */ .history-box { max-height: 250px; overflow-y: auto; padding-right: 4px; } .history-entry { display: flex; align-items: center; justify-content: space-between; padding: 6px 10px; border-radius: 8px; margin-bottom: 4px; } .history-text { flex: 1; margin: 0 10px; font-size: 14px; } .history-time { font-size: 12px; opacity: 0.7; } </style> </head> <body> <div class="container"> <!-- LOGIN FORM --> <div id="loginForm"> <h3>BERNIE'S REWARD</h3> <input id="card" placeholder="Card Number" autocapitalize="characters" oninput="this.value=this.value.toUpperCase()"> <input id="mpin" placeholder="MPIN" type="password" inputmode="numeric" pattern="[0-9]*" maxlength="6"/> <div style="margin-top:10px; font-size:14px; text-align:left;"> <input type="checkbox" id="agreeTerms" style="transform:scale(1.2); margin-right:6px;"> I agree to the <a href="#" onclick="showTerms()" style="color:blue;">Terms & Conditions</a> </div> <button onclick="login()">Login</button> <div class="login-reminder"> <strong>PAALALA:</strong><br> ‚Ä¢ WAG E SHARE ANG MPIN KAHIT KANINO<br> ‚Ä¢ PANATILIHING MAG LOG OUT </div> </div> <!-- INFO PANEL --> <div id="info" aria-live="polite"> <button class="logout-btn" onclick="logout()">Logout</button> <h4>WELCOME! BACK SUKI</h4> <div class="atm-card"> <div class="card-top"><div class="bank">BERNIE'S REWARD</div></div> <div class="card-number-wrapper"> <div id="cardnumDisplay" class="card-number">‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢</div> <div class="eye-icon" onclick="toggleNumber()">üëÅÔ∏è</div> </div> <div class="card-bottom"> <div> <div style="font-size:12px; opacity:0.85">Cardholder</div> <div id="cardHolder" class="holder">NAME SURNAME</div> </div> <div class="points-box"> <div class="points-label">Points</div> <div id="chipPoints">0</div> </div> </div> </div> <h4>REDEEM YOUR POINTS</h4> <input id="redeemPts" placeholder="Enter points to redeem" type="number" min="1" /> <button onclick="redeem()">Redeem</button> <h4>HISTORY</h4> <div id="history" class="history-box"></div> </div> <div class="footer">¬© 2025 Bernie's Reward</div> </div> <!-- TERMS MODAL --> <div id="termsModal"> <div id="termsBox"> <h3>Terms & Conditions</h3> <p style="font-size:14px; line-height:1.4;"> ‚Ä¢ Points may be used to redeem items or discounts.<br> ‚Ä¢ Points have no cash value.<br> ‚Ä¢ Card and points are non-transferable.<br> ‚Ä¢ If the card is lost, points may be retained and a replacement card can be issued.<br> ‚Ä¢ Exclusive reward for loyal customers only.<br><br> For inquiries, contact: <b>0997-159-5017</b> </p> <button onclick="closeTerms()">Close</button> </div> </div> <!-- REDEEM CODE MODAL --> <div id="codeModal"> <div id="codeModalContent"> <h4>Valid: 10 minutes only</h4> <h1 id="modalCode"></h1> <button onclick="closeModal()">OK</button> </div> </div> <!-- SPINNER --> <div id="spinner"><div></div></div> <script> const scriptURL="https://script.google.com/macros/s/AKfycbzG705Wvn6uP3Nq58OShKu0RtRItinThcHruiYxBchMc2l-5XwcyySFe96kdfCH-MhC2w/exec"; let currentCard="", currentMPIN="", fullCard="", numberShown=false; let lastPoints=0,lastHistory=""; let autoUpdateInterval,inactivityTimer; function showSpinner(){ document.getElementById("spinner").style.display="flex"; } function hideSpinner(){ document.getElementById("spinner").style.display="none"; } function showTerms(){ document.getElementById("termsModal").style.display="flex"; } function closeTerms(){ document.getElementById("termsModal").style.display="none"; } function login(){ const c=document.getElementById("card").value.trim(); const m=document.getElementById("mpin").value.trim(); if(!document.getElementById("agreeTerms").checked){ alert("Please agree to the Terms & Conditions."); return; } if(!c||!m){ alert("Please enter both Card Number and MPIN."); return; } showSpinner(); fetch(${scriptURL}?action=getCustomer&card=${encodeURIComponent(c)}&mpin=${encodeURIComponent(m)}) .then(r=>r.json()) .then(data=>{ hideSpinner(); if(data.error){ alert(data.error); return; } currentCard=c; currentMPIN=m; fullCard=c; numberShown=false; document.getElementById("loginForm").style.display="none"; document.getElementById("info").style.display="block"; document.getElementById("cardHolder").innerText=data.name||"Unknown"; document.getElementById("chipPoints").innerText = Math.ceil(data.points ?? 0); populateHistory(data.history??""); lastPoints=data.points??0; lastHistory=data.history??""; updateCardDisplay(); startAutoUpdate(); startInactivityTimer(); }).catch(()=>{ hideSpinner(); alert("Network error. Please try again."); }); } function populateHistory(historyText){ const historyDiv = document.getElementById("history"); historyDiv.innerHTML=""; (historyText ?? "").split("\n").filter(l=>l.trim()!=="").reverse().forEach((line,index)=>{ const div=document.createElement("div"); div.className="history-entry"; div.style.background=index%2===0?"#f0f8ff":"#e6f2ff"; const icon=document.createElement("span"); icon.style.marginRight="8px"; icon.textContent=line.toLowerCase().includes("redeem")?"üîª":line.toLowerCase().includes("add")?"üî∫":"üîπ"; const text=document.createElement("span"); text.className="history-text"; text.textContent=line; const time=document.createElement("span"); time.className="history-time"; const now=new Date(); time.textContent=${now.getHours()}:${now.getMinutes().toString().padStart(2,'0')}; div.appendChild(icon); div.appendChild(text); div.appendChild(time); historyDiv.appendChild(div); }); } function formatMasked(num){ const s=String(num).replace(/\s+/g,''); if(s.length<=4) return '‚Ä¢‚Ä¢‚Ä¢‚Ä¢'; const groups=s.match(/.{1,4}/g)||[]; return groups.map((g,i)=>(i===0||i===groups.length-1)?g:'‚Ä¢‚Ä¢‚Ä¢‚Ä¢').join(' '); } function spaced(num){ const s=String(num).replace(/\s+/g,''); return (s.match(/.{1,4}/g)||[]).join(' '); } function updateCardDisplay(){ document.getElementById("cardnumDisplay").innerText=numberShown?spaced(fullCard):formatMasked(fullCard); } function toggleNumber(){ if(!fullCard)return; numberShown=!numberShown; updateCardDisplay(); } function redeem(){ const pts=document.getElementById("redeemPts").value.trim(); if(!pts){ alert("Please enter points to redeem."); return; } showSpinner(); fetch(${scriptURL}?action=generateCode&card=${encodeURIComponent(currentCard)}&points=${encodeURIComponent(pts)}) .then(r=>r.text()).then(code=>{ hideSpinner(); document.getElementById("modalCode").innerText=code; document.getElementById("codeModal").style.display="flex"; document.getElementById("redeemPts").value=""; }) .catch(()=>{ hideSpinner(); alert("Failed to generate code."); }); } function closeModal(){ document.getElementById("codeModal").style.display="none"; } function logout(){ document.getElementById("info").style.display="none"; document.getElementById("loginForm").style.display="block"; document.getElementById("card").value=""; document.getElementById("mpin").value=""; currentCard=""; currentMPIN=""; fullCard=""; numberShown=false; lastPoints=0; lastHistory=""; stopAutoUpdate(); stopInactivityTimer(); } function startAutoUpdate(){ autoUpdateInterval=setInterval(()=>{ if(!currentCard) return; fetch(${scriptURL}?action=getCustomer&card=${encodeURIComponent(currentCard)}&mpin=${encodeURIComponent(currentMPIN)}) .then(r=>r.json()).then(data=>{ if(data.error) return; if(data.points!==lastPoints){ document.getElementById("chipPoints").innerText=Math.ceil(data.points ?? 0); lastPoints=Math.ceil(data.points ?? 0); } if(data.history!==lastHistory){ populateHistory(data.history??""); lastHistory=data.history; } }).catch(err=>console.log("Auto-update failed",err)); },2000); } function stopAutoUpdate(){ clearInterval(autoUpdateInterval); } function startInactivityTimer(){ const infoPanel=document.getElementById("info"); const resetTimer=()=>{ clearTimeout(inactivityTimer); inactivityTimer=setTimeout(logout,3000000); }; ["mousemove","keydown","touchstart"].forEach(e=>infoPanel.addEventListener(e,resetTimer)); resetTimer(); } function stopInactivityTimer(){ clearTimeout(inactivityTimer); } </script> </body> </html>
